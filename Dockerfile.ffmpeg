FROM docker.io/cloudflare/sandbox:0.7.0

# Install ffmpeg, curl, file utility, and Japanese fonts
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    ffmpeg \
    curl \
    file \
    fonts-noto-cjk-extra && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

# Start the Cloudflare Sandbox control plane
# This is required for the container to listen on the control port
CMD ["bun", "/container-server/dist/index.js"]
